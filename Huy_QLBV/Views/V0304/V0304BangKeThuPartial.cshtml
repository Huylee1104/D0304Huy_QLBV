@model M0304.Models.PhanTrang.M0304PhanTrang

<div >
    <table class="form_table">
        <thead>
            <tr class="mau_header">
                <th class="giua">STT</th>
                <th class="giua">Mã y tế</th>
                <th class="giua">Họ và tên</th>
                <th class="giua">Quyển sổ</th>
                <th class="giua">Số biên lai</th>
                <th class="giua">Loại</th>
                <th class="giua">Ngày thu</th>
                <th class="giua">Hủy</th>
                <th class="giua">Hoàn</th>
                <th class="giua">Số tiền</th>
            </tr>
        </thead>
        <tbody>
            @{
                if (Model.Data != null && Model.Data.Count > 0)
                {
                    // Tính số thứ tự bắt đầu theo trang
                    var stt = (Model.CurrentPage - 1) * Model.PageSize + 1;
                    foreach (var item in Model.Data)
                    {
                        <tr>
                            <td class="giua">@stt</td>
                            <td class="giua">@item.MaYTe</td>
                            <td class="trai">@item.HoVaTen</td>
                            <td class="giua">@item.QuyenSo</td>
                            <td class="giua">@item.SoBienLai</td>
                            <td class="giua">@item.Loai</td>
                            <td class="giua">@(item.NgayThu?.ToString("dd/MM/yyyy"))</td>
                            <td class="phai">@(item.Huy?.ToString("N2", System.Globalization.CultureInfo.InvariantCulture))</td>
                            <td class="phai">@(item.Hoan?.ToString("N2", System.Globalization.CultureInfo.InvariantCulture))</td>
                            <td class="phai">@(item.SoTien?.ToString("N2", System.Globalization.CultureInfo.InvariantCulture))</td>
                        </tr>
                        stt++;
                    }
                }
                else
                {
                    <tr><td colspan="10" class="text-center">Không có dữ liệu</td></tr>
                }
            }
        </tbody>
    </table>
</div>
@if (Model?.Data != null && Model.Data.Count > 0)
{
    <div class="phan_trang">
        <div class="dropdown-position">
            <div class="dropdown-position mb-0">
                <label for="pageSize" class="mb-0" style="margin-right: 6px; white-space: nowrap;">Số bản ghi mỗi trang:</label>
                <select name="pageSize" id="pageSize" class="form-control" style="width:auto; min-width:70px; padding-right: 10px;">
                    @if (Model.PageSize == 5)
                    {
                        <option value="5" selected>5</option>
                    }
                    else
                    {
                        <option value="5">5</option>
                    }
                    @if (Model.PageSize == 10)
                    {
                        <option value="10" selected>10</option>
                    }
                    else
                    {
                        <option value="10">10</option>
                    }
                    @if (Model.PageSize == 15)
                    {
                        <option value="15" selected>15</option>
                    }
                    else
                    {
                        <option value="15">15</option>
                    }
                </select>
            </div>
        </div>

        <div class="dropdown-position">
            <nav aria-label="Page navigation" class="pagination-wrapper">
                <ul class="pagination mb-0">
                    @if (Model.TotalPages > 1)
                    {
                        <li class="page-item @(Model.CurrentPage == 1 ? "disabled" : "")">
                            <a href="#" class="page-link" data-page="@(Model.CurrentPage - 1)">Trước</a>
                        </li>

                        @for (int i = 1; i <= Model.TotalPages; i++)
                        {
                            <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                                <a href="#" class="page-link" data-page="@i">@i</a>
                            </li>
                        }

                        <li class="page-item @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")">
                            <a href="#" class="page-link" data-page="@(Model.CurrentPage + 1)">Sau</a>
                        </li>
                    }
                </ul>
            </nav>
        </div>
        @if (Model.TotalPages > 1 && Model.TotalItems > 0)
        {
            <div class="dropdown-position mp-0">
                Trang @Model.CurrentPage / @Model.TotalPages - Tổng @Model.TotalItems bản ghi
            </div>
        }
    </div>
}
